//<fileHeader>

#warning("Manually move this test file to the corresponding test target then delete this warning.")

import <contextTestsImport1>
import <contextTestsImport2>

final class <nodeName>ContextTests: XCTestCase {

    private var storeMock: <storePrefix>StateStoreMock<<nodeName>State>!
    private var analyticsMock: <nodeName>AnalyticsMock!

    @MainActor
    override func setUp() {
        super.setUp()
        storeMock = <storePrefix>StateStoreMock(
            state: <nodeName>State()
        )
        analyticsMock = <nodeName>AnalyticsMock()
    }

    @MainActor
    override func tearDown() {
        storeMock = nil
        analyticsMock = nil
        super.tearDown()
    }

    @MainActor
    func testNotNil() {
        let context: <nodeName>ContextImp = givenContext()
        expect(context) != nil
    }

    @MainActor
    func testWorkersIsEmpty() {
        expect { [self] in context.workers }.to(beEmpty())
    }

    @MainActor
    func testActivation() {
        expect { [self] in context.isActive } == false
        context.activate()
        expect { [self] in context.isActive } == true
        context.deactivate()
        expect { [self] in context.isActive } == false
    }

    @MainActor
    private func givenContext() -> <nodeName>ContextImp {
        <nodeName>ContextImp(
            workers: [],
            store: storeMock,
            analytics: analyticsMock
        )
    }
}
